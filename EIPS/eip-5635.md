---
eip: 5635
title: NFT Licensing Agreements
description: An oracle for retrieving NFT licensing agreements
author: Timi (@0xTimi), 0xTriple7 (@ysqi)
discussions-to: https://ethereum-magicians.org/t/eip-5635-discussion-nft-licensing-agreement-standard/10779
status: Draft
type: Standards Track
category: ERC
created: 2022-08-10
requires: 165, 721, 1155
---

## Abstract

The NFT owner, known as the `Licensor`, may authorize another creator, known as the `Licensee`, to create a derivative works (dNFTs), in exchange for an agreed payment, known as a `Royalty`. A licensing agreement outlines terms and conditions related to the deal between the licensor and licensee.

This EIP standardizes an NFT licensing oracle to store (register) and retrieve (discover) granted licensing agreements for non-fungible token (NFT) derivative works, which are also NFTs but are created using properties of some other underlying NFTs.

In this standard, there are four important roles as following,

- **oNFT**: An original underlying NFT. The holder of an oNFT is a licensor. An oNFT can be any NFT.
- **dNFT**: A derivative work based on one or more oNFTs. The holder of a dNFT is a licensee.
- **lNFT**: A licensing NFT which represents an licensing agreement. An INFT can be traded to a new Licensee in any NFT marketplace before its rights are exercised.
- **Registry**: A trusted smart contract able to certify the authenticity of the licensing agreement, where the most important role of Registry is to prove that the creator of the dNFT has indeed obtained the licensing agreement of the oNFT holder.

## Specification

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.

Every [EIP-5635](./eip-5635.md) **lNFT** compliant contract MUST  implement the IERC5635,  [EIP-721](./eip-721.md)(or [EIP-1155](./eip-1155.md)) and [EIP-165](./eip-165.md) interfaces.

```solidity
/**
 * @title ERC-5635 NFT Licensing Agreements.
 * @dev See https://eips.ethereum.org/EIPS/eip-5635
 * Note: The ERC-165 identifier for this interface is 0x8e6f7f8e.
 */
interface IERC5635 {
    /// @dev The licensing argeement meta data.
    struct Record {
        address originalNFT;
        uint256 originalNFTId;
        // The licensing agreement template document. MUST support IArgeement interface. 
        address argeement;
        // Expiration timestamp of the licensing agreement.
        uint64 expiryTime;
        // The royalty rate mantissa as an unsigned integer, scaled by 1e8.
        uint32 royaltyRate;
        // The encoded field data in the argeement. When minting a licensing NFT, the licensor 
        // needs to explicitly fill in the required fields in the agreement document.
        bytes argeementInputs;
    }

    /**
     * @notice Get the licensing expiry timestamp.
     * @dev MUST revert if `licensingId` not found.
     */
    function expiryTime(uint256 licensingId) external view returns (uint256);

    /**
     * @notice Called with the sale price to determine how much royalty
     *         is owed and to whom.
     * @dev MUST revert if `licensingId` not found.
     *
     * @param  licenseId      ID of the licensing token.
     * @param  salePrice      The sale price of the dNFT asset specified.
     * @return receiver       Address of who should be sent the royalty payment
     * @return royaltyAmount  The royalty payment amount for salePrice
     */
    function royaltyInfo(uint256 licensingId, uint256 salePrice) external view returns (address receiver, uint256 royaltyAmount);

    /**
     * @notice Get the licensing royalty rate mantissa as an unsigned integer, scaled by 1e8.
     * @dev MUST revert if `licenseId` not found.
     */
    function royaltyRate(uint256 licensingId) external view returns (uint256);

    /**
     * @notice Get the origin NFT related to the given licensing NFT.
     *
     * @dev MUST revert if `licensingId` not found.
     */
    function originalNFT(uint256 licensingId) external view returns (address originNFT, uint256 originNFTId);

    /**
     * @notice Get the licensing agreement contract address.
     *
     * @dev MUST revert if `licensingId` not found.
     */
    function argeement(uint256 licensingId) external view returns (address);

    /**
     * @notice Retruns the licensing agreement input values.
     *
     * @dev MUST revert if `licensingId` not found.
     */
    function argeementInputs(uint256 licensingId) external view returns (bytes32[] memory);
}
```

The Registry compliant contract MUST  implement IERC5635Registry and  [EIP-165](./eip-165.md) interfaces.

```solidity
/**
 * @title ERC-5635 Licensing Agreement Registry Service.
 * @dev See https://eips.ethereum.org/EIPS/eip-5635
 * Note: The ERC-165 identifier for this interface is 0x33aaf7a5.
 */
interface IERC5635Registry {

    /**
     * @dev This emits when a license agreement is registered.
     */
    event Register(address derivativeToken, address derivativeTokenId, address licenseToken, uint256 licenseTokenId);

    /**
     * @notice register a license `licenseToken` for the given derivative.
     *
     * MUST revert if licenseToken is not support ERC5635 interface.
     * MUST revert if the method `supportLicense(licenseToken) returns `false`.
     * MUST revert if licenseTokenId is not exist.
     * MUST revert if derivativeToken is zero address.
     * MUST emit a `Register` event.
     */
    function register(address derivativeToken, address derivativeTokenId, address licenseToken, uint256 licenseTokenId) external;

    /**
     * @notice Check if a license has been registered for a given derivative.
     */
    function isRegistered(address derivativeToken, address derivativeTokenId, address licenseToken, uint256 licenseTokenId) external returns (bool);

    /**
     * @notice Check if a license of origin(`originToken`+`originTokenId`) token
     *         has been registered for a given derivative.
     */
    function isAuthorized(address derivativeToken, address derivativeTokenId, address originToken, uint256 originTokenId) external returns (bool);

    /**
     * @notice Returns true if the License is allowed to be used for registration.
     *
     * @param licenseToken is the license contract address.
     *
     */
    function supportsLicense(address licenseToken) external view returns (bool);
}
```

The smart contract recording the licensing agreement template document MUST implement IArgeement and  [EIP-165](./eip-165.md) interfaces.

```solidity
/**
 * @title ERC-5635 Licensing Argeements.
 * @dev See https://eips.ethereum.org/EIPS/eip-5635
 * Note: The ERC-165 identifier for this interface is 0x09e05fe8.
 * TODO: argeement vs license
 */
interface IArgeement {
    /**
     * @dev Returns the license URI.
     * e.g https://creativecommons.org/publicdomain/zero/1.0/legalcode
     */
    function licenseURI() external view returns (string memory);

    /**
     * @dev Returns the license name. e.g CC0-1.0
     */
    function licenseName() external view returns (string memory);

    /**
     * @dev Allow verification of content to be written in legal code.
     *
     * MUST revert if the input data is invalid.
     */
    function checkInputs(bytes calldata inputs) external view;

    /**
     * @notice Returns the argeement content URI.
     * 
     * MUST revert if the input data is invalid.
     */
    function contentURI(bytes calldata inputs) external view returns (string memory);
}
```

## Rationale

oNFT holder, as the licensor,can select the type of license agreement, fill in the contents
of the agreement, and mint license credentials. The license can be traded and circulated in
the market.

dNFT creators, as licensees,need to get licensor's authorization for dNFT. The licensee only
needs to buy a license from the marketplace or otherwise. Then choose a registration serveice
provider(`IERC5635Registry`) to register(call `register` method) the license with dNFT.

Eventually, anyone can check(call `isAuthorized` method) from the registration serveice
provider whether the oNFT licensor has authorized the dNFT.

If you wish to query for more details about the license, simply call the query method provided
by the license contract.

For example, anyone can retrieve licensing royalty information with `royaltyInfo` via the licensing token.
We encourage the NFT market to follow this EIP by issuing royalties to oNFT holders in real time
for dNFT transactions.

### Two stages: Licensing and Discovery

Taking the moment when the license is registered as the cut-off point, the stage before is called the
**Licensing** stage, and the subsequent stage is called the **Discovery** stage. The interface
`IERC5635` is for the **Licensing** stage, and the interfaces `IERC5635Registry` are for the
**Discovery** stage.

### Design decision: beneficiary of licensing agreement

As soon as someone sells their NFT, the full licensed rights are passed along to the new owner without
any encumbrances, so that the beneficiary should be the new NFT holder.

### Backwards Compatibility

This standard is compatible with [EIP-721](./eip-721.md), [EIP-1155](./eip-1155.md), and [EIP-2981](./eip-2981.md).

### Reference Implementation

// TODO

## Security Considerations

Needs discussion.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
